<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/index_usuario.css">
    <link rel="stylesheet" href="../css/product.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="icon" href="../img/logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <title>M & S</title>
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
        var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
        (function(){
            var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
            s1.async=true;
            s1.src='https://embed.tawk.to/67047dff02d78d1a30eddbf5/1i9koobr4';
            s1.charset='UTF-8';
            s1.setAttribute('crossorigin','*');
            s0.parentNode.insertBefore(s1,s0);
        })();
    </script>
    <!--End of Tawk.to Script-->
    <!--End of Tawk.to Script-->
</head>
<body>
<header>
    <div class="logo-container">
        <img src="../img/logo.png" class="logo">
    </div>
    <nav>
        <button class="menu-toggle" aria-label="Toggle menu">☰</button>
        <ul class="menu">
            <li><a href="/user">Inicio</a></li>
            <li><a href="/user#about">Nosotros</a></li>
            <li><a href="/user/products">Productos</a></li>
            <li><a href="/user/contacto">Contacto</a></li>
        </ul>
        <ul class="buttons">
            <li class="car">
                <a href="#" data-bs-toggle="modal" data-bs-target="#carritoModal">
                    <img src="../img/shop_car.png" alt="Carrito de Compras">
                </a>
            </li>
            <li class="perfil" id="perfil">
                <a href="#"><img src="../img/userlogo.png" alt="Perfil de Usuario"></a>
                <div class="perfil-dropdown" id="perfilDropdown">
                    <a href="editar_informacion.html">Editar Información</a>
                    <a href="ver_pedidos.html">Ver Pedidos</a>
                    <a th:href="@{/logout}">Cerrar Sesión</a>
                </div>
            </li>
            </li>
        </ul>
    </nav>
</header>
<div class="container mt-4">
    <div class="row">
        <div class="col-md-3 col-sm-6 mb-4" th:each="product : ${productList}">
            <div class="card">
                <img th:src="@{${product.imageUrl}}" class="card-img-top" alt="Imagen de producto" style="height: 200px; object-fit: cover;">
                <div class="card-body">
                    <h5 class="card-title" th:text="${product.name}">Nombre del producto</h5>
                    <p class="card-text" th:text="${product.description}">Descripción del producto</p>
                    <p class="card-text" th:text="${product.price} + 'COP'">Precio: $</p>
                    <a th:href="@{/cart/add/{id}(id=${product.id})}" class="btn">Añadir al Carrito</a>
                </div>
            </div>
        </div>

        <!-- Placeholder para mantener la estructura si no hay suficientes productos -->

    </div>
    <!-- Modal del Carrito -->
    <div class="modal fade" id="carritoModal" tabindex="-1" aria-labelledby="carritoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm"> <!-- Cambiado a modal-sm para tamaño pequeño -->
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="carritoModalLabel">Carrito de Compras</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Contenido del Carrito -->
                    <p>Aquí se mostrarán los productos agregados al carrito.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary">Proceder al Pago</button>
                </div>
            </div>
        </div>
    </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../js/menu_toggle.js"></script>
<script src="../js/perfil_dropdown.js"></script>
</body>
</html>
